> [!NOTE]  
> Данное описание создано с помощью нейросети DeepSeek.


# Микросервис уведомлений

Микросервис предназначен для информирования пользователей о ходе работы запущенных фоновых процессов.


## Переменные окружения

Для работы микросервиса необходимо задать следующие переменные окружения:

- `TOKEN`: Токен бота Telegram, от имени которого отправляются сообщения. Обязательный параметр.
- `NATS_SERVERS`: Адрес брокера NATS для подключения. Обязательный параметр. Пример: `nats://nats:4222`.


## Запуск

Для запуска микросервиса запустите докер-образ `schedule_bot`, переопределив `entrypoint` следующим образом: `["python3", "-m", "services.sender"]`.
Убедитесь, что переменные окружения `TOKEN` и `NATS_SERVERS` заданы.


## Обработка сообщений

### Уведомления об ошибках

- **Топик**: `schedules.error`
- **Заголовок `Sch-Chat-Id`**: Идентификатор чата Telegram
- **Тело**: Текстовое описание ошибки

Микросервис пересылает текстовое описание в Telegram-чат, указанный в заголовке `Sch-Chat-Id`.

### Изображения

- **Топик**: `schedules.ready`
- **Заголовок**: `Sch-Chat-Id` (содержит идентификатор чата)
- **Тело**: Бинарные данные. Ожидается, что это будет изображение в формате PNG.

Микросервис отправляет изображение как файл с именем _Schedule.png_ в Telegram-чат, указанный в заголовке `Sch-Chat-Id`.
